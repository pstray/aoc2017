#! /bin/bash

basedir=$(cd $(dirname $(realpath $0))/..; pwd -)

cd "$basedir" || exit 1

git fetch --all
git rebase --autostash

today=$(date +%Y/%d)
mkdir -p $today
cd $today

GLOBIGNORE="*~"
shopt -s nullglob
solution=($(ls solution*))
if [ -z "${solution[0]}" ]; then
    solution=(solution.pl)
fi

emacsclient -a emacs -n "${solution[@]}"

echo $"Starting a shell..."

bash
